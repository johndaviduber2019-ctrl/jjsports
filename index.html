<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>J&J Sports</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

<style>
body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background-color: #0f0f0f;
    color: #f5f5f5;
}

header {
    padding: 20px;
    font-size: 22px;
    font-weight: 700;
    color: #00ff88;
}

.container {
    padding: 20px;
}

.main-btn {
    width: 100%;
    padding: 20px;
    background: linear-gradient(90deg, #00ff88, #00cc66);
    border: none;
    border-radius: 15px;
    font-size: 18px;
    font-weight: 600;
    color: black;
    box-shadow: 0 0 20px #00ff88;
    margin-bottom: 25px;
}

.card {
    background-color: #1a1a1a;
    padding: 20px;
    border-radius: 15px;
    margin-bottom: 15px;
    box-shadow: 0 0 15px rgba(0,255,136,0.2);
}

.metric {
    font-size: 24px;
    font-weight: 700;
    color: #00ff88;
}

.bottom-nav {
    position: fixed;
    bottom: 0;
    width: 100%;
    background: #111;
    display: flex;
    justify-content: space-around;
    padding: 15px 0;
    border-top: 1px solid #222;
}
</style>
</head>

<body>

<header>J&J Sports</header>

<div class="container">

<button class="main-btn" onclick="startActivity()">Iniciar Atividade</button>

<div class="card">
<div>Dist√¢ncia</div>
<div class="metric" id="distance">0.00 km</div>
</div>

<div class="card">
<div>Tempo</div>
<div class="metric" id="time">00:00</div>
</div>

<div class="card">
<div>Calorias (estimado)</div>
<div class="metric" id="calories">0 kcal</div>
</div>

</div>

<div class="bottom-nav">
<div>üè†</div>
<div>üìç</div>
<div>üî•</div>
<div>üìä</div>
<div>üë§</div>
</div>

<script>
let watchId;
let startTime;
let timerInterval;
let totalDistance = 0;
let lastPosition = null;

function startActivity() {

    if (navigator.geolocation) {

        startTime = Date.now();

        timerInterval = setInterval(updateTime, 1000);

        watchId = navigator.geolocation.watchPosition(updatePosition);

        alert("GPS iniciado üöÄ");

    } else {
        alert("GPS n√£o suportado neste dispositivo");
    }
}

function updateTime() {
    let elapsed = Math.floor((Date.now() - startTime) / 1000);
    let minutes = String(Math.floor(elapsed / 60)).padStart(2, '0');
    let seconds = String(elapsed % 60).padStart(2, '0');
    document.getElementById("time").innerText = `${minutes}:${seconds}`;

    let calories = (totalDistance * 60).toFixed(0);
    document.getElementById("calories").innerText = calories + " kcal";
}

function updatePosition(position) {
    let lat = position.coords.latitude;
    let lon = position.coords.longitude;

    if (lastPosition != null) {
        totalDistance += calculateDistance(
            lastPosition.lat,
            lastPosition.lon,
            lat,
            lon
        );
    }

    lastPosition = { lat, lon };

    document.getElementById("distance").innerText =
        (totalDistance / 1000).toFixed(2) + " km";
}

function calculateDistance(lat1, lon1, lat2, lon2) {
    const R = 6371e3;
    const œÜ1 = lat1 * Math.PI/180;
    const œÜ2 = lat2 * Math.PI/180;
    const ŒîœÜ = (lat2-lat1) * Math.PI/180;
    const ŒîŒª = (lon2-lon1) * Math.PI/180;

    const a = Math.sin(ŒîœÜ/2) * Math.sin(ŒîœÜ/2) +
              Math.cos(œÜ1) * Math.cos(œÜ2) *
              Math.sin(ŒîŒª/2) * Math.sin(ŒîŒª/2);

    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));

    return R * c;
}
</script>

</body>
</html>
